// Modern ES Modules ile Kiren HTTP Server √∂rneƒüi
console.log("üöÄ Starting Modular Kiren HTTP Server...");

// HTTP mod√ºl√ºn√º import et
import("kiren/http").then(async (http) => {
    console.log("‚úÖ HTTP module loaded successfully");
    
    // Server olu≈ütur
    const server = http.createServer();
    console.log("üîß HTTP server created");

    // Routes tanƒ±mla
    server.get("/", (req, res) => {
        console.log("üìù GET / called");
        return "Hello from Modular Kiren! üéØ";
    });

    server.get("/api/status", (req, res) => {
        console.log("üìä GET /api/status called");
        return {
            status: "ok",
            message: "Modular Kiren API is running!",
            runtime: "kiren",
            moduleSystem: "ES Modules"
        };
    });

    server.post("/api/echo", (req, res) => {
        console.log("üîÑ POST /api/echo called");
        return {
            message: "Echo from modular server",
            timestamp: new Date().toISOString()
        };
    });

    // Server'ƒ± ba≈ülat
    console.log("üåê Starting server on port 3001...");
    server.listen(3001);
    
    console.log("üéâ Modular server ready!");
    console.log("üìã Available routes:");
    console.log("  - GET  http://localhost:3001/");
    console.log("  - GET  http://localhost:3001/api/status");
    console.log("  - POST http://localhost:3001/api/echo");
    console.log("  - GET  http://localhost:3001/health (built-in)");
    
}).catch(error => {
    console.error("‚ùå Failed to load HTTP module:", error);
});