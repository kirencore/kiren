// Modern ES Modules ile Kiren File System √∂rneƒüi
console.log("üìÅ Starting Modular File Operations Demo...");

// FS mod√ºl√ºn√º import et
import("kiren/fs").then(async (fs) => {
    console.log("‚úÖ FS module loaded successfully");
    
    // Test dosyasƒ± yolu
    const testFile = "modular-test.txt";
    const testDir = "modular-test-dir";
    
    console.log("üîß Starting file operations...");
    
    try {
        // 1. Dosya yazma
        console.log("‚úèÔ∏è  Writing file...");
        fs.writeFile(testFile, "Hello from Modular Kiren FS! üéØ\nThis file was created using ES Modules.");
        console.log(`‚úÖ File '${testFile}' written successfully`);
        
        // 2. Dosya okuma
        console.log("üìñ Reading file...");
        const content = fs.readFile(testFile);
        console.log("üìÑ File content:");
        console.log(content);
        
        // 3. Dosya varlƒ±ƒüƒ±nƒ± kontrol etme
        console.log("üîç Checking file existence...");
        const exists = fs.exists(testFile);
        console.log(`üìù File '${testFile}' exists: ${exists}`);
        
        // 4. Dizin olu≈üturma
        console.log("üìÅ Creating directory...");
        fs.mkdir(testDir);
        console.log(`‚úÖ Directory '${testDir}' created successfully`);
        
        // 5. Dizin varlƒ±ƒüƒ±nƒ± kontrol etme
        const dirExists = fs.exists(testDir);
        console.log(`üìÇ Directory '${testDir}' exists: ${dirExists}`);
        
        // 6. Dizin i√ßine dosya yazma
        const nestedFile = `${testDir}/nested-file.txt`;
        console.log("üìù Writing nested file...");
        fs.writeFile(nestedFile, "This is a nested file created with modular FS API!");
        
        const nestedContent = fs.readFile(nestedFile);
        console.log("üìÑ Nested file content:");
        console.log(nestedContent);
        
        console.log("üéâ All modular file operations completed successfully!");
        
    } catch (error) {
        console.error("‚ùå File operation failed:", error);
    }
    
}).catch(error => {
    console.error("‚ùå Failed to load FS module:", error);
});